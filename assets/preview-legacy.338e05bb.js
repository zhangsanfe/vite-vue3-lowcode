var __vite_style__=document.createElement("style");__vite_style__.innerHTML=".h5-preview{overflow:hidden}.h5-preview .el-dialog__header{display:none}.h5-preview .simulator{padding-right:0}.h5-preview .simulator::-webkit-scrollbar{width:0}",document.head.appendChild(__vite_style__),System.register(["./visual.config-legacy.91fcb8ee.js","./preload-helper-legacy.3aaadfe5.js","./useAnimate-legacy.13c846f4.js","./preview-legacy.c5c1639c.js"],(function(e){"use strict";var t,n,o,l,i,a,s,r,c,u,d,p,m,f,v,g,y,h,w,C,_,b,k,S,O,j,P,x,T,N,$,z,B,E;return{setters:[function(e){t=e.f,n=e.h,o=e.j,l=e.P,i=e.k,a=e.I,s=e.L,r=e.l,c=e.m,u=e.w,d=e.n,p=e.v},function(e){m=e.l,f=e.b,v=e.y,g=e.d,y=e.w,h=e.x,w=e.q,C=e.B,_=e.I,b=e.m,k=e.t,S=e.g,O=e.o,j=e.e,P=e.ai,x=e.aD,T=e.f,N=e.H,$=e.C,z=e.$},function(e){B=e.u},function(e){E=e.r}],execute:function(){var I=0;var[L,A]=i("toast"),D=g({name:L,props:{icon:String,show:Boolean,overlay:Boolean,message:[Number,String],iconSize:[Number,String],className:o,iconPrefix:String,loadingType:String,forbidClick:Boolean,overlayClass:o,overlayStyle:Object,closeOnClick:Boolean,closeOnClickOverlay:Boolean,type:{type:String,default:"text"},duration:{type:Number,default:2e3},position:{type:String,default:"middle"},transition:{type:String,default:"van-fade"}},emits:["update:show"],setup(e,{emit:t}){var n,o=!1,i=()=>{var t=e.show&&e.forbidClick;o!==t&&((o=t)?(I||document.body.classList.add("van-toast--unclickable"),I++):I&&(--I||document.body.classList.remove("van-toast--unclickable")))},c=e=>t("update:show",e),u=()=>{e.closeOnClick&&c(!1)},d=()=>{clearTimeout(n)},p=()=>{var{icon:t,type:n,iconSize:o,iconPrefix:l,loadingType:i}=e;return t||"success"===n||"fail"===n?C(a,{name:t||n,size:o,class:A("icon"),classPrefix:l},null):"loading"===n?C(s,{class:A("loading"),size:o,type:i},null):void 0},m=()=>{var{type:t,message:n}=e;if(r(n)&&""!==n)return"html"===t?C("div",{class:A("text"),innerHTML:String(n)},null):C("div",{class:A("text")},[n])};return y((()=>[e.show,e.forbidClick]),i),y((()=>[e.show,e.type,e.message,e.duration]),(()=>{d(),e.show&&e.duration>0&&(n=setTimeout((()=>{c(!1)}),e.duration))})),h(i),w(i),()=>C(l,_({show:e.show,class:[A([e.position,{[e.type]:!e.icon}]),e.className],overlay:e.overlay,lockScroll:!1,transition:e.transition,overlayClass:e.overlayClass,overlayStyle:e.overlayStyle,closeOnClickOverlay:e.closeOnClickOverlay,onClick:u,onClosed:d},{"onUpdate:show":c}),{default:()=>[p(),m()]})}}),M={icon:"",type:"text",message:"",className:"",overlay:!1,onClose:void 0,onOpened:void 0,duration:2e3,teleport:"body",iconSize:void 0,iconPrefix:void 0,position:"middle",transition:"van-fade",forbidClick:!1,loadingType:void 0,overlayClass:"",overlayStyle:void 0,closeOnClick:!1,closeOnClickOverlay:!1},H=[],R=!1,K=t({},M),U={};function q(e){return d(e)?e:{message:e}}function G(){var e,o,{instance:l,unmount:i}=(e=m({setup(){var e=b(""),{open:o,state:a,close:s,toggle:r}=function(){var e=f({show:!1}),o=t=>{e.show=t},l=n=>{t(e,n),v((()=>o(!0)))},i=()=>o(!1);return n({open:l,close:i,toggle:o}),{open:l,close:i,state:e,toggle:o}}(),c=()=>{R&&(H=H.filter((e=>e!==l)),i())};return k().render=()=>{var t={onClosed:c,"onUpdate:show":r};return e.value&&(t.message=e.value),C(D,_(a,t),null)},{open:o,clear:s,message:e}}}),o=document.createElement("div"),document.body.appendChild(o),{instance:e.mount(o),unmount(){e.unmount(),document.body.removeChild(o)}});return l}function J(e={}){if(!c)return{};var n=function(){if(!H.length||R){var e=G();H.push(e)}return H[H.length-1]}(),o=q(e);return n.open(t({},K,U[o.type||K.type],o)),n}var Y=e=>n=>J(t({type:e},q(n)));J.loading=Y("loading"),J.success=Y("success"),J.fail=Y("fail"),J.clear=e=>{H.length&&(e?(H.forEach((e=>{e.clear()})),H=[]):R?H.shift().clear():H[0].clear())},J.setDefaultOptions=function(e,n){"string"==typeof e?U[e]=n:t(K,e)},J.resetDefaultOptions=e=>{"string"==typeof e?U[e]=null:(K=t({},M),U={})},J.allowMultiple=(e=!0)=>{R=e},J.install=e=>{e.use(u(D)),e.config.globalProperties.$toast=J};var F=g({name:"CompRender",props:{element:{type:Object,default:()=>({})},config:{type:Object,default:()=>({})}},setup:e=>()=>e.config.componentMap[e.element.componentKey].render({size:{},props:e.element.props||{},model:{},block:e.element,custom:{}})}),Q=g({name:"SlotItem",components:{CompRender:F},props:{element:{type:[Object],default:()=>({})},config:{type:Object,default:()=>({})}},setup:e=>(h((()=>{const t=e.element.animations;if(t?.length){let n=window.$$refs[e.element._vid]?.$el??window.$$refs[e.element._vid];n=n?.closest(".__slot-item")?.firstChild,n&&B(n,t)}})),{})});const V={class:"__slot-item"};Q.render=function(e,t,n,o,l,i){const a=S("slot-item",!0),s=S("comp-render");return O(),j("div",V,[C(s,{element:e.element,config:e.config},P({_:2},[x(e.element.props?.slots,((t,n)=>({name:n,fn:T((()=>[(O(!0),j(N,null,x(t?.children,(t=>(O(),j(a,{key:t._vid,element:t,config:e.config},null,8,["element","config"])))),128))]))})))]),1032,["element","config"])])};e("default",g({name:"Preview",components:{SlotItem:Q},setup(){const e=JSON.parse(localStorage.getItem($.PAGE_DATA_KEY));e&&Object.keys(e.pages)||J.fail("当前没有可以预览的页面！");const t=E.currentRoute,n=f({currentPage:e.pages[t.value.path]?.blocks});return n.currentPage||E.replace("/"),{...z(n),visualConfig:p}}})).render=function(e,t,n,o,l,i){const a=S("slot-item");return O(!0),j(N,null,x(e.currentPage,(t=>(O(),j(a,{key:t._vid,element:t,config:e.visualConfig},null,8,["element","config"])))),128)}}}}));
