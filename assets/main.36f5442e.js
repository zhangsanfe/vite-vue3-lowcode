var t=Object.defineProperty,e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(e,n,r)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,i=(t,i)=>{for(var s in i||(i={}))n.call(i,s)&&o(t,s,i[s]);if(e)for(var s of e(i))r.call(i,s)&&o(t,s,i[s]);return t};import{C as s,r as a,c,u,a as l,b as p,w as d,i as f,d as h,o as m,e as g,f as v,p as y,g as _,h as b,j as w,k as j,_ as O,l as S,s as k}from"./preload-helper.1969ef4b.js";import{v as C}from"./visual.config.4ff975d7.js";function E(){return"undefined"!=typeof navigator?window:"undefined"!=typeof global?global:{}}function P(t,e){const n=E().__VUE_DEVTOOLS_GLOBAL_HOOK__;if(n)n.emit("devtools-plugin:setup",t,e);else{const n=E();(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:t,setupFn:e})}}const x=s.PAGE_DATA_KEY,M=Symbol("injectKey"),I={container:{width:360,height:960},pages:{"/":{title:"首页",path:"/",blocks:[]}}},D=()=>f(M);var T,N,G=h({expose:[],setup(t){const e=(()=>{var t,e,n;const r=JSON.parse(sessionStorage.getItem(x)),o=Object.keys((null==r?void 0:r.pages)||{}).length?r:I,s=u(),f=l();console.log("jsonData：",o);const h=t=>t.startsWith("/")?t:`/${t}`,m=o.pages[s.path],g=p({jsonData:o,currentPage:m,currentBlock:null!=(e=null==(t=null==m?void 0:m.blocks)?void 0:t.find((t=>t.focus)))?e:{}}),v=Object.keys(o.pages);v.some((t=>s.path==t))||(f.replace(v[0]||"/"),g.currentPage=null!=(n=o.pages[v[0]])?n:I.pages["/"]),d((()=>s.path),(t=>_(t)));const y=(t="",e="")=>{delete g.jsonData.pages[t],e&&_(e)},_=(t="/")=>{g.currentPage=o.pages[t],g.currentPage||(g.currentPage=o.pages["/"],f.replace("/"));const e=g.currentPage.blocks.find((t=>t.focus));b(null!=e?e:{})},b=t=>{g.currentBlock=t};return{visualConfig:C,jsonData:a(g.jsonData),currentPage:c((()=>g.currentPage)),currentBlock:c((()=>g.currentBlock)),overrideProject:t=>{g.jsonData="string"==typeof t?JSON.parse(t):t},setCurrentPage:_,setCurrentBlock:b,updatePage:({newPath:t,oldPath:e,page:n})=>{console.log(g.jsonData.pages[e],n),t&&t!=e?(n.path=t,g.jsonData.pages[h(t)]=i(i({},g.jsonData.pages[e]),n),y(e,h(t))):Object.assign(g.jsonData.pages[e],n)},incrementPage:(t="",e)=>{var n,r;null!=(n=g.jsonData.pages)[r=h(t)]||(n[r]=null!=e?e:{title:"新页面",path:t,blocks:[]})},deletePage:y,updatePageBlock:(t="",e=[])=>{g.jsonData.pages[t].blocks=e}}})();y(M,e);const{jsonData:n}=e;return window.addEventListener("beforeunload",(()=>{sessionStorage.setItem(x,JSON.stringify(n))})),(t,e)=>{const n=_("router-view");return m(),g(n,null,{default:v((({Component:t,route:e})=>[(m(),g(b(t),{key:e.path}))])),_:1})}}}),L={version:"0.2.0"},U=L.settings={minimum:.08,easing:"linear",positionUsing:"",speed:200,trickle:!0,trickleSpeed:200,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function A(t,e,n){return t<e?e:t>n?n:t}function B(t){return 100*(-1+t)}L.configure=function(t){var e,n;for(e in t)void 0!==(n=t[e])&&t.hasOwnProperty(e)&&(U[e]=n);return this},L.status=null,L.set=function(t){var e=L.isStarted();t=A(t,U.minimum,1),L.status=1===t?null:t;var n=L.render(!e),r=n.querySelector(U.barSelector),o=U.speed,i=U.easing;return V((function(e){var s,a,c,u;""===U.positionUsing&&(U.positionUsing=L.getPositioningCSS()),R(r,(s=t,a=o,c=i,(u="translate3d"===U.positionUsing?{transform:"translate3d("+B(s)+"%,0,0)"}:"translate"===U.positionUsing?{transform:"translate("+B(s)+"%,0)"}:{"margin-left":B(s)+"%"}).transition="all "+a+"ms "+c,u)),1===t?(R(n,{transition:"none",opacity:1}),setTimeout((function(){R(n,{transition:"all "+o+"ms linear",opacity:0}),setTimeout((function(){L.remove(),e()}),o)}),o)):setTimeout(e,o)})),this},L.isStarted=function(){return"number"==typeof L.status},L.start=function(){L.status||L.set(0);var t=function(){setTimeout((function(){L.status&&(L.trickle(),t())}),U.trickleSpeed)};return U.trickle&&t(),this},L.done=function(t){return t||L.status?L.inc(.3+.5*Math.random()).set(1):this},L.inc=function(t){var e=L.status;return e?e>1?void 0:("number"!=typeof t&&(t=e>=0&&e<.2?.1:e>=.2&&e<.5?.04:e>=.5&&e<.8?.02:e>=.8&&e<.99?.005:0),e=A(e+t,0,.994),L.set(e)):L.start()},L.trickle=function(){return L.inc()},T=0,N=0,L.promise=function(t){return t&&"resolved"!==t.state()?(0===N&&L.start(),T++,N++,t.always((function(){0==--N?(T=0,L.done()):L.set((T-N)/T)})),this):this},L.render=function(t){if(L.isRendered())return document.getElementById("nprogress");W(document.documentElement,"nprogress-busy");var e=document.createElement("div");e.id="nprogress",e.innerHTML=U.template;var n,r=e.querySelector(U.barSelector),o=t?"-100":B(L.status||0),i=document.querySelector(U.parent);return R(r,{transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),U.showSpinner||(n=e.querySelector(U.spinnerSelector))&&H(n),i!=document.body&&W(i,"nprogress-custom-parent"),i.appendChild(e),e},L.remove=function(){q(document.documentElement,"nprogress-busy"),q(document.querySelector(U.parent),"nprogress-custom-parent");var t=document.getElementById("nprogress");t&&H(t)},L.isRendered=function(){return!!document.getElementById("nprogress")},L.getPositioningCSS=function(){var t=document.body.style,e="WebkitTransform"in t?"Webkit":"MozTransform"in t?"Moz":"msTransform"in t?"ms":"OTransform"in t?"O":"";return e+"Perspective"in t?"translate3d":e+"Transform"in t?"translate":"margin"};var V=function(){var t=[];function e(){var n=t.shift();n&&n(e)}return function(n){t.push(n),1==t.length&&e()}}(),R=function(){var t=["Webkit","O","Moz","ms"],e={};function n(n,r,o){var i;i=(i=r).replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,(function(t,e){return e.toUpperCase()})),r=e[i]||(e[i]=function(e){var n=document.body.style;if(e in n)return e;for(var r,o=t.length,i=e.charAt(0).toUpperCase()+e.slice(1);o--;)if((r=t[o]+i)in n)return r;return e}(i)),n.style[r]=o}return function(t,e){var r,o,i=arguments;if(2==i.length)for(r in e)void 0!==(o=e[r])&&e.hasOwnProperty(r)&&n(t,r,o);else n(t,i[1],i[2])}}();function $(t,e){return("string"==typeof t?t:z(t)).indexOf(" "+e+" ")>=0}function W(t,e){var n=z(t),r=n+e;$(n,e)||(t.className=r.substring(1))}function q(t,e){var n,r=z(t);$(t,e)&&(n=r.replace(" "+e+" "," "),t.className=n.substring(1,n.length-1))}function z(t){return(" "+(t&&t.className||"")+" ").replace(/\s+/gi," ")}function H(t){t&&t.parentNode&&t.parentNode.removeChild(t)}L.configure({showSpinner:!1});const F=[{path:"/:pathMatch(.*)*",component:()=>O((()=>__import__("./index.9c06a12b.js").then((function(t){return t.i}))),["/vite-vue3-lowcode/assets/index.9c06a12b.js","/vite-vue3-lowcode/assets/index.2993e52c.css","/vite-vue3-lowcode/assets/preload-helper.1969ef4b.js","/vite-vue3-lowcode/assets/preload-helper.1a0b0609.css","/vite-vue3-lowcode/assets/visual.config.4ff975d7.js","/vite-vue3-lowcode/assets/visual.config.947336ba.css","/vite-vue3-lowcode/assets/editorWorker.573d4f48.js","/vite-vue3-lowcode/assets/useAnimate.644289ba.js"])}],J=w({history:j(),routes:F});J.beforeEach((()=>(L.start(),!0))),J.afterEach((()=>{L.done()}));function K(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function Y(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function Q(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;Z(t,n,[],t._modules.root,!0),X(t,n,e)}function X(t,e,n){var r=t._state;t.getters={},t._makeLocalGettersCache=Object.create(null);var o=t._wrappedGetters,i={};K(o,(function(e,n){i[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return i[n]()},enumerable:!0})})),t._state=p({data:e}),t.strict&&function(t){d((function(){return t._state.data}),(function(){}),{deep:!0,flush:"sync"})}(t),r&&n&&t._withCommit((function(){r.data=null}))}function Z(t,e,n,r,o){var i=!n.length,s=t._modules.getNamespace(n);if(r.namespaced&&(t._modulesNamespaceMap[s],t._modulesNamespaceMap[s]=r),!i&&!o){var a=et(e,n.slice(0,-1)),c=n[n.length-1];t._withCommit((function(){a[c]=r.state}))}var u=r.context=function(t,e,n){var r=""===e,o={dispatch:r?t.dispatch:function(n,r,o){var i=nt(n,r,o),s=i.payload,a=i.options,c=i.type;return a&&a.root||(c=e+c),t.dispatch(c,s)},commit:r?t.commit:function(n,r,o){var i=nt(n,r,o),s=i.payload,a=i.options,c=i.type;a&&a.root||(c=e+c),t.commit(c,s,a)}};return Object.defineProperties(o,{getters:{get:r?function(){return t.getters}:function(){return tt(t,e)}},state:{get:function(){return et(t.state,n)}}}),o}(t,s,n);r.forEachMutation((function(e,n){!function(t,e,n,r){(t._mutations[e]||(t._mutations[e]=[])).push((function(e){n.call(t,r.state,e)}))}(t,s+n,e,u)})),r.forEachAction((function(e,n){var r=e.root?n:s+n,o=e.handler||e;!function(t,e,n,r){(t._actions[e]||(t._actions[e]=[])).push((function(e){var o,i=n.call(t,{dispatch:r.dispatch,commit:r.commit,getters:r.getters,state:r.state,rootGetters:t.getters,rootState:t.state},e);return(o=i)&&"function"==typeof o.then||(i=Promise.resolve(i)),t._devtoolHook?i.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):i}))}(t,r,o,u)})),r.forEachGetter((function(e,n){!function(t,e,n,r){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(r.state,r.getters,t.state,t.getters)}}(t,s+n,e,u)})),r.forEachChild((function(r,i){Z(t,e,n.concat(i),r,o)}))}function tt(t,e){if(!t._makeLocalGettersCache[e]){var n={},r=e.length;Object.keys(t.getters).forEach((function(o){if(o.slice(0,r)===e){var i=o.slice(r);Object.defineProperty(n,i,{get:function(){return t.getters[o]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function et(t,e){return e.reduce((function(t,e){return t[e]}),t)}function nt(t,e,n){var r;return null!==(r=t)&&"object"==typeof r&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var rt=0;function ot(t,e){P({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:["vuex bindings"]},(function(n){n.addTimelineLayer({id:"vuex:mutations",label:"Vuex Mutations",color:it}),n.addTimelineLayer({id:"vuex:actions",label:"Vuex Actions",color:it}),n.addInspector({id:"vuex",label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&"vuex"===n.inspectorId)if(n.filter){var r=[];ut(r,e._modules.root,n.filter,""),n.rootNodes=r}else n.rootNodes=[ct(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&"vuex"===n.inspectorId){var r=n.nodeId;tt(e,r),n.state=function(t,e,n){e="root"===n?e:e[n];var r=Object.keys(e),o={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};r.length&&(o.getters=r.map((function(t){return{key:t.endsWith("/")?at(t):t,editable:!1,value:e[t]}})));return o}((o=e._modules,(s=(i=r).split("/").filter((function(t){return t}))).reduce((function(t,e,n){var r=t[e];if(!r)throw new Error('Missing module "'+e+'" for path "'+i+'".');return n===s.length-1?r:r._children}),"root"===i?o:o.root._children)),e._makeLocalGettersCache,r)}var o,i,s})),n.on.editInspectorState((function(n){if(n.app===t&&"vuex"===n.inspectorId){var r=n.nodeId,o=n.path;"root"!==r&&(o=r.split("/").filter(Boolean).concat(o)),e._withCommit((function(){n.set(e._state.data,o,n.state.value)}))}})),e.subscribe((function(t,e){var r={};t.payload&&(r.payload=t.payload),r.state=e,n.notifyComponentUpdate(),n.sendInspectorTree("vuex"),n.sendInspectorState("vuex"),n.addTimelineEvent({layerId:"vuex:mutations",event:{time:Date.now(),title:t.type,data:r}})})),e.subscribeAction({before:function(t,e){var r={};t.payload&&(r.payload=t.payload),t._id=rt++,t._time=Date.now(),r.state=e,n.addTimelineEvent({layerId:"vuex:actions",event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:r}})},after:function(t,e){var r={},o=Date.now()-t._time;r.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},t.payload&&(r.payload=t.payload),r.state=e,n.addTimelineEvent({layerId:"vuex:actions",event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:r}})}})}))}var it=8702998,st={label:"namespaced",textColor:16777215,backgroundColor:6710886};function at(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function ct(t,e){return{id:e||"root",label:at(e),tags:t.namespaced?[st]:[],children:Object.keys(t._children).map((function(n){return ct(t._children[n],e+n+"/")}))}}function ut(t,e,n,r){r.includes(n)&&t.push({id:r||"root",label:r.endsWith("/")?r.slice(0,r.length-1):r||"Root",tags:e.namespaced?[st]:[]}),Object.keys(e._children).forEach((function(o){ut(t,e._children[o],n,r+o+"/")}))}var lt=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},pt={namespaced:{configurable:!0}};pt.namespaced.get=function(){return!!this._rawModule.namespaced},lt.prototype.addChild=function(t,e){this._children[t]=e},lt.prototype.removeChild=function(t){delete this._children[t]},lt.prototype.getChild=function(t){return this._children[t]},lt.prototype.hasChild=function(t){return t in this._children},lt.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},lt.prototype.forEachChild=function(t){K(this._children,t)},lt.prototype.forEachGetter=function(t){this._rawModule.getters&&K(this._rawModule.getters,t)},lt.prototype.forEachAction=function(t){this._rawModule.actions&&K(this._rawModule.actions,t)},lt.prototype.forEachMutation=function(t){this._rawModule.mutations&&K(this._rawModule.mutations,t)},Object.defineProperties(lt.prototype,pt);var dt=function(t){this.register([],t,!1)};function ft(t,e,n){if(e.update(n),n.modules)for(var r in n.modules){if(!e.getChild(r))return;ft(t.concat(r),e.getChild(r),n.modules[r])}}dt.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},dt.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")}),"")},dt.prototype.update=function(t){ft([],this.root,t)},dt.prototype.register=function(t,e,n){var r=this;void 0===n&&(n=!0);var o=new lt(e,n);0===t.length?this.root=o:this.get(t.slice(0,-1)).addChild(t[t.length-1],o);e.modules&&K(e.modules,(function(e,o){r.register(t.concat(o),e,n)}))},dt.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],r=e.getChild(n);r&&r.runtime&&e.removeChild(n)},dt.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};var ht=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var r=t.strict;void 0===r&&(r=!1);var o=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new dt(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=o;var i=this,s=this.dispatch,a=this.commit;this.dispatch=function(t,e){return s.call(i,t,e)},this.commit=function(t,e,n){return a.call(i,t,e,n)},this.strict=r;var c=this._modules.root.state;Z(this,c,[],this._modules.root),X(this,c),n.forEach((function(t){return t(e)}))},mt={state:{configurable:!0}};ht.prototype.install=function(t,e){t.provide(e||"store",this),t.config.globalProperties.$store=this,void 0!==this._devtools&&this._devtools&&ot(t,this)},mt.state.get=function(){return this._state.data},mt.state.set=function(t){},ht.prototype.commit=function(t,e,n){var r=this,o=nt(t,e,n),i=o.type,s=o.payload,a={type:i,payload:s},c=this._mutations[i];c&&(this._withCommit((function(){c.forEach((function(t){t(s)}))})),this._subscribers.slice().forEach((function(t){return t(a,r.state)})))},ht.prototype.dispatch=function(t,e){var n=this,r=nt(t,e),o=r.type,i=r.payload,s={type:o,payload:i},a=this._actions[o];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(s,n.state)}))}catch(u){}var c=a.length>1?Promise.all(a.map((function(t){return t(i)}))):a[0](i);return new Promise((function(t,e){c.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(s,n.state)}))}catch(u){}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(s,n.state,t)}))}catch(u){}e(t)}))}))}},ht.prototype.subscribe=function(t,e){return Y(t,this._subscribers,e)},ht.prototype.subscribeAction=function(t,e){return Y("function"==typeof t?{before:t}:t,this._actionSubscribers,e)},ht.prototype.watch=function(t,e,n){var r=this;return d((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},ht.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},ht.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),Z(this,this.state,t,this._modules.get(t),n.preserveState),X(this,this.state)},ht.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){delete et(e.state,t.slice(0,-1))[t[t.length-1]]})),Q(this)},ht.prototype.hasModule=function(t){return"string"==typeof t&&(t=[t]),this._modules.isRegistered(t)},ht.prototype.hotUpdate=function(t){this._modules.update(t),Q(this,!0)},ht.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(ht.prototype,mt);const gt={count:0};var vt=new ht({state:()=>gt,mutations:{increment(t){t.count++}},actions:{increment(t){t.commit("increment")}},getters:{double:t=>2*t.count}});const yt=S(G);k(yt),yt.config.globalProperties.$$refs={},window.$$refs=yt.config.globalProperties.$$refs,yt.use(J).use(vt),J.isReady().then((()=>yt.mount("#app")));export{x as l,D as u};
